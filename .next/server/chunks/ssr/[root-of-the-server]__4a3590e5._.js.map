{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yukia/Downloads/koku-lesson-planner/app/plan/ClientPlan.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, CSSProperties, FormEvent } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport Papa from \"papaparse\";\r\nimport { db } from \"../firebaseConfig\";\r\nimport { doc, setDoc } from \"firebase/firestore\";\r\nimport { useSession } from \"next-auth/react\";\r\n\r\nconst EDIT_KEY = \"editLessonPlan\";\r\n\r\n// Google Drive フォルダID（環境に合わせて差し替え or 外部import推奨）\r\nconst GOOGLE_DRIVE_FOLDER_ID = \"1BJPdPWLPq1N5Nqf0-rAj6CzFVfUkU__9\";\r\n\r\ntype StyleModel = {\r\n  id: string;\r\n  name: string;\r\n  content: string;\r\n};\r\n\r\ntype ParsedResult = {\r\n  [key: string]: any;\r\n};\r\n\r\ntype EvaluationPoints = {\r\n  knowledge: string[];\r\n  thinking: string[];\r\n  attitude: string[];\r\n};\r\n\r\ntype LessonPlanStored = {\r\n  id: string;\r\n  subject: string;\r\n  grade: string;\r\n  genre: string;\r\n  unit: string;\r\n  hours: string | number;\r\n  unitGoal: string;\r\n  evaluationPoints: EvaluationPoints;\r\n  childVision: string;\r\n  lessonPlanList: string[];\r\n  languageActivities: string;\r\n  selectedStyleId: string;\r\n  result: ParsedResult;\r\n  timestamp: string;\r\n  usedStyleName?: string | null;\r\n};\r\n\r\nexport default function ClientPlan() {\r\n  // NextAuth セッション取得（アクセストークン含む）\r\n  const { data: session, status } = useSession();\r\n\r\n  useEffect(() => {\r\n    console.log(\"ログイン状態:\", status);\r\n    console.log(\"セッション情報:\", session);\r\n  }, [session, status]);\r\n\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams() as URLSearchParams;\r\n\r\n  const [mode, setMode] = useState<\"ai\" | \"manual\">(\"ai\");\r\n  const [styleModels, setStyleModels] = useState<StyleModel[]>([]);\r\n  const [selectedStyleId, setSelectedStyleId] = useState<string>(\"\");\r\n\r\n  const [subject, setSubject] = useState(\"東京書籍\");\r\n  const [grade, setGrade] = useState(\"1年\");\r\n  const [genre, setGenre] = useState(\"物語文\");\r\n  const [unit, setUnit] = useState(\"\");\r\n  const [hours, setHours] = useState(\"\");\r\n  const [unitGoal, setUnitGoal] = useState(\"\");\r\n\r\n  const [evaluationPoints, setEvaluationPoints] = useState<EvaluationPoints>({\r\n    knowledge: [\"\"],\r\n    thinking: [\"\"],\r\n    attitude: [\"\"],\r\n  });\r\n\r\n  const [childVision, setChildVision] = useState(\"\");\r\n  const [languageActivities, setLanguageActivities] = useState(\"\");\r\n  const [lessonPlanList, setLessonPlanList] = useState<string[]>([]);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [parsedResult, setParsedResult] = useState<ParsedResult | null>(null);\r\n\r\n  const [editId, setEditId] = useState<string | null>(null);\r\n  const [initialData, setInitialData] = useState<LessonPlanStored | null>(null);\r\n\r\n  // 初期読み込み（編集モード判定）\r\n  useEffect(() => {\r\n    const storedEdit = localStorage.getItem(EDIT_KEY);\r\n    if (storedEdit) {\r\n      try {\r\n        const plan = JSON.parse(storedEdit) as LessonPlanStored;\r\n        setEditId(plan.id);\r\n        setSubject(plan.subject);\r\n        setGrade(plan.grade);\r\n        setGenre(plan.genre);\r\n        setUnit(plan.unit);\r\n        setHours(String(plan.hours));\r\n        setUnitGoal(plan.unitGoal);\r\n        setEvaluationPoints(plan.evaluationPoints);\r\n        setChildVision(plan.childVision);\r\n        setLanguageActivities(plan.languageActivities);\r\n        setLessonPlanList(plan.lessonPlanList);\r\n        setSelectedStyleId(plan.selectedStyleId);\r\n        setParsedResult(plan.result);\r\n        setInitialData(plan);\r\n        setMode(\"ai\");\r\n      } catch {\r\n        setEditId(null);\r\n        setInitialData(null);\r\n        localStorage.removeItem(EDIT_KEY);\r\n      }\r\n    }\r\n    const styleIdParam = searchParams.get(\"styleId\");\r\n    if (styleIdParam) {\r\n      setSelectedStyleId(styleIdParam);\r\n    }\r\n  }, [searchParams]);\r\n\r\n  // 教育観モデル読み込み\r\n  useEffect(() => {\r\n    const storedModels = localStorage.getItem(\"styleModels\");\r\n    if (storedModels) {\r\n      try {\r\n        const arr = JSON.parse(storedModels) as StyleModel[];\r\n        setStyleModels(arr);\r\n      } catch {\r\n        setStyleModels([]);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // CSVテンプレート読み込み（評価の観点）\r\n  useEffect(() => {\r\n    fetch(\"/templates.csv\")\r\n      .then((res) => res.text())\r\n      .then((text) => {\r\n        const data = Papa.parse(text, { header: true }).data as any[];\r\n        const matched = data.filter(\r\n          (r) => r.学年 === grade && r.ジャンル === genre\r\n        );\r\n        const grouped: EvaluationPoints = {\r\n          knowledge: matched\r\n            .filter((r) => r.観点 === \"knowledge\")\r\n            .map((r) => r.内容),\r\n          thinking: matched\r\n            .filter((r) => r.観点 === \"thinking\")\r\n            .map((r) => r.内容),\r\n          attitude: matched\r\n            .filter((r) => r.観点 === \"attitude\")\r\n            .map((r) => r.内容),\r\n        };\r\n        if (\r\n          grouped.knowledge.length ||\r\n          grouped.thinking.length ||\r\n          grouped.attitude.length\r\n        ) {\r\n          setEvaluationPoints(grouped);\r\n        }\r\n      })\r\n      .catch(() => {});\r\n  }, [grade, genre]);\r\n\r\n  // 教育観モデル選択変更ハンドラ\r\n  const handleStyleChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    setSelectedStyleId(e.target.value);\r\n  };\r\n\r\n  // 評価の観点追加・削除・変更ハンドラ\r\n  const handleAddPoint = (f: keyof EvaluationPoints) =>\r\n    setEvaluationPoints((p) => ({ ...p, [f]: [...p[f], \"\"] }));\r\n\r\n  const handleRemovePoint = (f: keyof EvaluationPoints, i: number) =>\r\n    setEvaluationPoints((p) => ({\r\n      ...p,\r\n      [f]: p[f].filter((_, idx) => idx !== i),\r\n    }));\r\n\r\n  const handleChangePoint = (\r\n    f: keyof EvaluationPoints,\r\n    i: number,\r\n    v: string\r\n  ) => {\r\n    const arr = [...evaluationPoints[f]];\r\n    arr[i] = v;\r\n    setEvaluationPoints((p) => ({ ...p, [f]: arr }));\r\n  };\r\n\r\n  // 授業展開手入力変更ハンドラ\r\n  const handleLessonChange = (i: number, v: string) => {\r\n    const arr = [...lessonPlanList];\r\n    arr[i] = v;\r\n    setLessonPlanList(arr);\r\n  };\r\n\r\n  // 授業案生成・表示ボタン（Submit）処理\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setParsedResult(null);\r\n\r\n    const count = Number(hours) || 0;\r\n    const newList = Array.from({ length: count }, (_, i) => lessonPlanList[i] || \"\");\r\n    setLessonPlanList(newList);\r\n\r\n    if (mode === \"manual\") {\r\n      const manualFlow: Record<string, string> = {};\r\n      newList.forEach((step, idx) => {\r\n        manualFlow[`${idx + 1}時間目`] = step;\r\n      });\r\n\r\n      const manualResult: ParsedResult = {\r\n        \"教科書名\": subject,\r\n        \"学年\": grade,\r\n        \"ジャンル\": genre,\r\n        \"単元名\": unit,\r\n        \"授業時間数\": count,\r\n        \"単元の目標\": unitGoal,\r\n        \"評価の観点\": {\r\n          \"知識・技能\": evaluationPoints.knowledge,\r\n          \"思考・判断・表現\": evaluationPoints.thinking,\r\n          \"主体的に学習に取り組む態度\": evaluationPoints.attitude,\r\n        },\r\n        \"育てたい子どもの姿\": childVision,\r\n        \"授業の流れ\": manualFlow,\r\n        \"言語活動の工夫\": languageActivities,\r\n        \"結果\": \"\",\r\n      };\r\n\r\n      setParsedResult(manualResult);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // AIモードの場合はAPIに投げて取得\r\n    try {\r\n      const selectedModel = styleModels.find((m) => m.id === selectedStyleId);\r\n      const modelContent = selectedModel ? selectedModel.content : \"\";\r\n\r\n      const flowLines = newList\r\n        .map((step, idx) => {\r\n          if (step.trim()) {\r\n            return `${idx + 1}時間目: ${step}`;\r\n          } else {\r\n            return `${idx + 1}時間目: `;\r\n          }\r\n        })\r\n        .join(\"\\n\");\r\n\r\n      const prompt = `\r\nあなたは小学校の国語の授業プランナーです。\r\n${modelContent ? `以下の教育観を反映してください。\\n${modelContent}\\n` : \"\"}\r\n\r\n【教科書名】${subject}\r\n【学年】${grade}\r\n【ジャンル】${genre}\r\n【単元名】${unit}\r\n【授業時間数】${count}\r\n\r\n■ 単元の目標:\r\n${unitGoal}\r\n\r\n■ 評価の観点 (JSON 配列形式):\r\n知識・技能=${evaluationPoints.knowledge.join(\"、\")};\r\n思考・判断・表現=${evaluationPoints.thinking.join(\"、\")};\r\n主体的に学習に取り組む態度=${evaluationPoints.attitude.join(\"、\")}\r\n\r\n■ 育てたい子どもの姿:\r\n${childVision}\r\n\r\n■ 授業の流れ:\r\n${flowLines}\r\n\r\n※上記で「n時間目: 」だけ書かれている箇所は、AI が自動生成してください。\r\n\r\n■ 言語活動の工夫:\r\n${languageActivities}\r\n\r\n—返却フォーマット—\r\n{\r\n  \"教科書名\": string,\r\n  \"学年\": string,\r\n  \"ジャンル\": string,\r\n  \"単元名\": string,\r\n  \"授業時間数\": number,\r\n  \"単元の目標\": string,\r\n  \"評価の観点\": {\r\n    \"知識・技能\": string[],\r\n    \"思考・判断・表現\": string[],\r\n    \"主体的に学習に取り組む態度\": string[]\r\n  },\r\n  \"育てたい子どもの姿\": string,\r\n  \"授業の流れ\": {\r\n    \"1時間目\": string,\r\n    \"2時間目\": string,\r\n    // … \r\n    \"${count}時間目\": string\r\n  },\r\n  \"言語活動の工夫\": string,\r\n  \"結果\": string\r\n}\r\n      `;\r\n\r\n      const res = await fetch(\"/api/generate\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ prompt }),\r\n      });\r\n      const text = await res.text();\r\n\r\n      if (!res.ok) {\r\n        throw new Error(text || res.statusText);\r\n      }\r\n\r\n      let data: any;\r\n      try {\r\n        data = JSON.parse(text);\r\n      } catch {\r\n        throw new Error(\"サーバーから無効なJSONが返ってきました\");\r\n      }\r\n\r\n      setParsedResult(data as ParsedResult);\r\n    } catch (e: any) {\r\n      alert(`生成に失敗しました：${e.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Google Driveアップロード処理\r\n  const uploadPdfToGoogleDrive = async (pdfBlob: Blob, fileName: string, accessToken: string) => {\r\n    const metadata = {\r\n      name: fileName,\r\n      mimeType: \"application/pdf\",\r\n      parents: [GOOGLE_DRIVE_FOLDER_ID],\r\n    };\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"metadata\", new Blob([JSON.stringify(metadata)], { type: \"application/json\" }));\r\n    formData.append(\"file\", pdfBlob);\r\n\r\n    const res = await fetch(\r\n      \"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${accessToken}`,\r\n        },\r\n        body: formData,\r\n      }\r\n    );\r\n\r\n    if (!res.ok) throw new Error(\"Google Driveアップロード失敗\");\r\n    return await res.json();\r\n  };\r\n  // 一括保存ボタン処理：ローカル・Firestore・Driveに保存\r\n  const handleSaveAll = async () => {\r\n    if (!parsedResult) {\r\n      alert(\"まず授業案を生成してください\");\r\n      return;\r\n    }\r\n\r\n    const isEdit = Boolean(editId);\r\n    const idToUse = isEdit ? editId! : Date.now().toString();\r\n    const timestamp = new Date().toISOString();\r\n\r\n    const existingArr: LessonPlanStored[] = JSON.parse(localStorage.getItem(\"lessonPlans\") || \"[]\");\r\n\r\n    if (isEdit) {\r\n      const newArr = existingArr.map((p) =>\r\n        p.id === idToUse\r\n          ? {\r\n              id: idToUse,\r\n              subject,\r\n              grade,\r\n              genre,\r\n              unit,\r\n              hours,\r\n              unitGoal,\r\n              evaluationPoints,\r\n              childVision,\r\n              lessonPlanList,\r\n              languageActivities,\r\n              selectedStyleId,\r\n              result: parsedResult,\r\n              timestamp,\r\n              usedStyleName: styleModels.find((m) => m.id === selectedStyleId)?.name ?? null,\r\n            }\r\n          : p\r\n      );\r\n      localStorage.setItem(\"lessonPlans\", JSON.stringify(newArr));\r\n    } else {\r\n      const newPlan: LessonPlanStored = {\r\n        id: idToUse,\r\n        subject,\r\n        grade,\r\n        genre,\r\n        unit,\r\n        hours,\r\n        unitGoal,\r\n        evaluationPoints,\r\n        childVision,\r\n        lessonPlanList,\r\n        languageActivities,\r\n        selectedStyleId,\r\n        result: parsedResult,\r\n        timestamp,\r\n        usedStyleName: styleModels.find((m) => m.id === selectedStyleId)?.name ?? null,\r\n      };\r\n      existingArr.push(newPlan);\r\n      localStorage.setItem(\"lessonPlans\", JSON.stringify(existingArr));\r\n    }\r\n\r\n    try {\r\n      await setDoc(\r\n        doc(db, \"lesson_plans\", idToUse),\r\n        {\r\n          subject,\r\n          grade,\r\n          genre,\r\n          unit,\r\n          hours,\r\n          unitGoal,\r\n          evaluationPoints,\r\n          childVision,\r\n          lessonPlanList,\r\n          languageActivities,\r\n          selectedStyleId,\r\n          result: parsedResult,\r\n          timestamp,\r\n          usedStyleName: styleModels.find((m) => m.id === selectedStyleId)?.name ?? null,\r\n        },\r\n        { merge: true }\r\n      );\r\n    } catch {\r\n      alert(\"Firestoreへの保存中にエラーが発生しました\");\r\n      return;\r\n    }\r\n\r\n    // PDF Blob生成＋Google Driveアップロード\r\n    const el = document.getElementById(\"result-content\");\r\n    if (!el) {\r\n      alert(\"結果表示の要素が見つかりません\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const html2pdf = (await import(\"html2pdf.js\")).default;\r\n      const pdfBlob: Blob = await new Promise((resolve, reject) => {\r\n        html2pdf()\r\n          .from(el)\r\n          .outputPdf(\"blob\")\r\n          .then(resolve)\r\n          .catch(reject);\r\n      });\r\n\r\n      const accessToken = (session as any)?.accessToken;\r\nif (!accessToken) {\r\n  alert(\"Google Driveアップロード用のアクセストークンがありません。ログインしてください。\");\r\n  return;\r\n}\r\n\r\n      await uploadPdfToGoogleDrive(pdfBlob, `${unit}_授業案.pdf`, accessToken);\r\n    } catch (e: any) {\r\n      alert(`Google Driveへの保存に失敗しました：${e.message || e}`);\r\n      return;\r\n    }\r\n\r\n    localStorage.removeItem(EDIT_KEY);\r\n    alert(\"一括保存しました（ローカル・Firestore・Drive）\");\r\n    router.push(\"/plan/history\");\r\n  };\r\n\r\n  // PDFダウンロードのみ\r\n  const handlePdfDownloadOnly = async () => {\r\n    if (!parsedResult) {\r\n      alert(\"まず授業案を生成してください\");\r\n      return;\r\n    }\r\n\r\n    const el = document.getElementById(\"result-content\");\r\n    if (!el) return alert(\"PDF生成対象がありません\");\r\n    const html2pdf = (await import(\"html2pdf.js\")).default;\r\n    html2pdf()\r\n      .from(el)\r\n      .set({\r\n        margin: 5,\r\n        filename: `${unit}_授業案.pdf`,\r\n        html2canvas: { scale: 2 },\r\n        jsPDF: { unit: \"mm\", format: \"a4\", orientation: \"portrait\" },\r\n        pagebreak: { mode: [\"avoid-all\"] },\r\n      })\r\n      .save();\r\n  };\r\n\r\n  // スタイル（元コードから）\r\n  const containerStyle: CSSProperties = { maxWidth: 800, margin: \"auto\", padding: \"1rem\" };\r\n  const cardStyle: CSSProperties = {\r\n    border: \"1px solid #ddd\",\r\n    borderRadius: 8,\r\n    padding: \"1rem\",\r\n    marginBottom: \"1rem\",\r\n    backgroundColor: \"#fff\",\r\n    boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\",\r\n  };\r\n  const titleStyle: CSSProperties = { fontSize: \"1.2rem\", fontWeight: \"bold\", marginBottom: \"0.5rem\" };\r\n  const listStyle: CSSProperties = { paddingLeft: \"1rem\", marginTop: \"0.5rem\" };\r\n  const inputStyle: CSSProperties = {\r\n    width: \"100%\",\r\n    padding: \"0.8rem\",\r\n    fontSize: \"1.1rem\",\r\n    borderRadius: 8,\r\n    border: \"1px solid #ccc\",\r\n    marginBottom: \"1rem\",\r\n  };\r\n  const navStyle: CSSProperties = {\r\n    display: \"flex\",\r\n    gap: \"1rem\",\r\n    overflowX: \"auto\",\r\n    padding: \"1rem\",\r\n    backgroundColor: \"#f0f0f0\",\r\n    borderRadius: 8,\r\n    marginBottom: \"2rem\",\r\n    whiteSpace: \"nowrap\",\r\n  };\r\n  const navLinkStyle: CSSProperties = {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    gap: \"0.5rem\",\r\n    padding: \"0.5rem 1rem\",\r\n    backgroundColor: \"#1976d2\",\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    borderRadius: 6,\r\n    textDecoration: \"none\",\r\n  };\r\n\r\n  return (\r\n    <main style={containerStyle}>\r\n      <nav style={navStyle}>\r\n        <Link href=\"/\" style={navLinkStyle}>🏠 ホーム</Link>\r\n        <Link href=\"/plan\" style={navLinkStyle}>📋 授業作成</Link>\r\n        <Link href=\"/plan/history\" style={navLinkStyle}>📖 計画履歴</Link>\r\n        <Link href=\"/practice/history\" style={navLinkStyle}>📷 実践履歴</Link>\r\n        <Link href=\"/models/create\" style={navLinkStyle}>✏️ 教育観作成</Link>\r\n        <Link href=\"/models\" style={navLinkStyle}>📚 教育観覧</Link>\r\n        <Link href=\"/models/history\" style={navLinkStyle}>🕒 教育観履歴</Link>\r\n      </nav>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div style={{ marginBottom: \"1rem\" }}>\r\n          <label style={{ marginRight: \"1rem\" }}>\r\n            <input\r\n              type=\"radio\"\r\n              value=\"ai\"\r\n              checked={mode === \"ai\"}\r\n              onChange={() => setMode(\"ai\")}\r\n            /> AIモード\r\n          </label>\r\n          <label>\r\n            <input\r\n              type=\"radio\"\r\n              value=\"manual\"\r\n              checked={mode === \"manual\"}\r\n              onChange={() => setMode(\"manual\")}\r\n            /> 手動モード\r\n          </label>\r\n        </div>\r\n\r\n        <label>\r\n          モデル選択：<br/>\r\n          <select value={selectedStyleId} onChange={handleStyleChange} style={inputStyle}>\r\n            <option value=\"\">（未選択）</option>\r\n            {styleModels.map((m) => (\r\n              <option key={m.id} value={m.id}>{m.name}</option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n\r\n        <label>\r\n          教科書名：<br/>\r\n          <select value={subject} onChange={(e) => setSubject(e.target.value)} style={inputStyle}>\r\n            <option>東京書籍</option><option>光村図書</option><option>教育出版</option>\r\n          </select>\r\n        </label>\r\n\r\n        <label>\r\n          学年：<br/>\r\n          <select value={grade} onChange={(e) => setGrade(e.target.value)} style={inputStyle}>\r\n            <option>1年</option><option>2年</option><option>3年</option>\r\n            <option>4年</option><option>5年</option><option>6年</option>\r\n          </select>\r\n        </label>\r\n\r\n        <label>\r\n          ジャンル：<br/>\r\n          <select value={genre} onChange={(e) => setGenre(e.target.value)} style={inputStyle}>\r\n            <option>物語文</option><option>説明文</option><option>詩</option>\r\n          </select>\r\n        </label>\r\n\r\n        <label>\r\n          単元名：<br/>\r\n          <input\r\n            type=\"text\"\r\n            value={unit}\r\n            onChange={(e) => setUnit(e.target.value)}\r\n            style={inputStyle}\r\n          />\r\n        </label>\r\n\r\n        <label>\r\n          授業時間数：<br/>\r\n          <input\r\n            type=\"number\"\r\n            value={hours}\r\n            onChange={(e) => setHours(e.target.value)}\r\n            style={inputStyle}\r\n          />\r\n        </label>\r\n\r\n        <label>\r\n          ■ 単元の目標：<br/>\r\n          <textarea\r\n            value={unitGoal}\r\n            onChange={(e) => setUnitGoal(e.target.value)}\r\n            rows={2}\r\n            style={inputStyle}\r\n          />\r\n        </label>\r\n\r\n        {([\"knowledge\", \"thinking\", \"attitude\"] as const).map((f) => (\r\n          <div key={f} style={{ marginBottom: \"1rem\" }}>\r\n            <label style={{ display: \"block\", marginBottom: \"0.5rem\" }}>\r\n              {f === \"knowledge\"\r\n                ? \"① 知識・技能：\"\r\n                : f === \"thinking\"\r\n                ? \"② 思考・判断・表現：\"\r\n                : \"③ 主体的に学習に取り組む態度：\"}\r\n            </label>\r\n            {evaluationPoints[f].map((v, i) => (\r\n              <div\r\n                key={i}\r\n                style={{ display: \"flex\", gap: \"0.5rem\", marginBottom: \"0.5rem\" }}\r\n              >\r\n                <textarea\r\n                  value={v}\r\n                  onChange={(e) => handleChangePoint(f, i, e.target.value)}\r\n                  style={{ ...inputStyle, flex: 1 }}\r\n                />\r\n                <button type=\"button\" onClick={() => handleRemovePoint(f, i)}>\r\n                  🗑\r\n                </button>\r\n              </div>\r\n            ))}\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => handleAddPoint(f)}\r\n              style={{ ...inputStyle, backgroundColor: \"#9C27B0\", color: \"white\" }}\r\n            >\r\n              ＋ 追加\r\n            </button>\r\n          </div>\r\n        ))}\r\n\r\n        <label>\r\n          ■ 育てたい子どもの姿：<br/>\r\n          <textarea\r\n            value={childVision}\r\n            onChange={(e) => setChildVision(e.target.value)}\r\n            rows={2}\r\n            style={inputStyle}\r\n          />\r\n        </label>\r\n\r\n        <label>\r\n          ■ 言語活動の工夫：<br/>\r\n          <textarea\r\n            value={languageActivities}\r\n            onChange={(e) => setLanguageActivities(e.target.value)}\r\n            rows={2}\r\n            style={inputStyle}\r\n          />\r\n        </label>\r\n\r\n        {hours && (\r\n          <div style={{ marginBottom: \"1rem\" }}>\r\n            <div style={{ marginBottom: \"0.5rem\" }}>\r\n              ■ 授業の展開（手動で入力／空欄はAIが生成）\r\n            </div>\r\n            {Array.from({ length: Number(hours) }, (_, i) => (\r\n              <div\r\n                key={i}\r\n                style={{ display: \"flex\", gap: \"0.5rem\", marginBottom: \"0.5rem\" }}\r\n              >\r\n                <span style={{ width: \"4rem\", lineHeight: \"2rem\" }}>{i + 1}時間目:</span>\r\n                <textarea\r\n                  value={lessonPlanList[i] || \"\"}\r\n                  onChange={(e) => handleLessonChange(i, e.target.value)}\r\n                  style={{ ...inputStyle, flex: 1 }}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          type=\"submit\"\r\n          style={{ ...inputStyle, backgroundColor: \"#2196F3\", color: \"white\" }}\r\n        >\r\n          {mode === \"manual\" ? \"授業案を表示する\" : \"授業案を生成する\"}\r\n        </button>\r\n      </form>\r\n\r\n      {loading && <p>生成中…</p>}\r\n\r\n      {parsedResult && (\r\n        <>\r\n          <div\r\n            style={{\r\n              marginTop: 16,\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              gap: 12,\r\n            }}\r\n          >\r\n            <button\r\n              onClick={handleSaveAll}\r\n              style={{\r\n                padding: \"12px\",\r\n                backgroundColor: \"#4CAF50\",\r\n                color: \"white\",\r\n                fontSize: \"1.1rem\",\r\n                borderRadius: 8,\r\n                border: \"none\",\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              💾 一括保存 (ローカル・Firestore・Drive)\r\n            </button>\r\n\r\n            <button\r\n              onClick={handlePdfDownloadOnly}\r\n              style={{\r\n                padding: \"12px\",\r\n                backgroundColor: \"#FF9800\",\r\n                color: \"white\",\r\n                fontSize: \"1.1rem\",\r\n                borderRadius: 8,\r\n                border: \"none\",\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              📄 PDFをダウンロード\r\n            </button>\r\n          </div>\r\n\r\n          <div id=\"result-content\" style={cardStyle}>\r\n            <div style={titleStyle}>授業の概要</div>\r\n            <p>教科書名：{parsedResult[\"教科書名\"]}</p>\r\n            <p>学年：{parsedResult[\"学年\"]}</p>\r\n            <p>ジャンル：{parsedResult[\"ジャンル\"]}</p>\r\n            <p>単元名：{parsedResult[\"単元名\"]}</p>\r\n            <p>授業時間数：{parsedResult[\"授業時間数\"]}時間</p>\r\n            <p>育てたい子どもの姿：{parsedResult[\"育てたい子どもの姿\"] || \"\"}</p>\r\n\r\n            <div style={{ marginTop: 12 }}>\r\n              <div style={titleStyle}>単元の目標</div>\r\n              <p>{parsedResult[\"単元の目標\"]}</p>\r\n            </div>\r\n\r\n            <div style={{ marginTop: 12 }}>\r\n              <div style={titleStyle}>評価の観点</div>\r\n\r\n              <strong>知識・技能</strong>\r\n              <ul style={listStyle}>\r\n                {(\r\n                  Array.isArray(parsedResult[\"評価の観点\"]?.[\"知識・技能\"])\r\n                    ? parsedResult[\"評価の観点\"][\"知識・技能\"]\r\n                    : parsedResult[\"評価の観点\"]?.[\"知識・技能\"]\r\n                    ? [parsedResult[\"評価の観点\"][\"知識・技能\"]]\r\n                    : []\r\n                ).map((v: string, i: number) => (\r\n                  <li key={`knowledge-${i}`}>{v}</li>\r\n                ))}\r\n              </ul>\r\n\r\n              <strong>思考・判断・表現</strong>\r\n              <ul style={listStyle}>\r\n                {(\r\n                  Array.isArray(parsedResult[\"評価の観点\"]?.[\"思考・判断・表現\"])\r\n                    ? parsedResult[\"評価の観点\"][\"思考・判断・表現\"]\r\n                    : parsedResult[\"評価の観点\"]?.[\"思考・判断・表現\"]\r\n                    ? [parsedResult[\"評価の観点\"][\"思考・判断・表現\"]]\r\n                    : []\r\n                ).map((v: string, i: number) => (\r\n                  <li key={`thinking-${i}`}>{v}</li>\r\n                ))}\r\n              </ul>\r\n\r\n              <strong>主体的に学習に取り組む態度</strong>\r\n              <ul style={listStyle}>\r\n                {(\r\n                  Array.isArray(parsedResult[\"評価の観点\"]?.[\"主体的に学習に取り組む態度\"])\r\n                    ? parsedResult[\"評価の観点\"][\"主体的に学習に取り組む態度\"]\r\n                    : parsedResult[\"評価の観点\"]?.[\"主体的に学習に取り組む態度\"]\r\n                    ? [parsedResult[\"評価の観点\"][\"主体的に学習に取り組む態度\"]]\r\n                    : parsedResult[\"評価の観点\"]?.[\"態度\"]\r\n                    ? [parsedResult[\"評価の観点\"][\"態度\"]]\r\n                    : []\r\n                ).map((v: string, i: number) => (\r\n                  <li key={`attitude-${i}`}>{v}</li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n\r\n            <div style={{ marginTop: 12 }}>\r\n              <div style={titleStyle}>言語活動の工夫</div>\r\n              <p>{parsedResult[\"言語活動の工夫\"]}</p>\r\n            </div>\r\n\r\n            <div style={{ marginTop: 12 }}>\r\n              <div style={titleStyle}>授業の流れ</div>\r\n              <ul style={listStyle}>\r\n                {parsedResult[\"授業の流れ\"] &&\r\n                  typeof parsedResult[\"授業の流れ\"] === \"object\" &&\r\n                  Object.entries(parsedResult[\"授業の流れ\"]).map(([key, val], i) => (\r\n                    <li key={`flow-${i}`}>\r\n                      <strong>{key}：</strong> {String(val)}\r\n                    </li>\r\n                  ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1467, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yukia/Downloads/koku-lesson-planner/app/plan/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { Suspense } from \"react\";\r\nimport ClientPlan from \"./ClientPlan\";\r\n\r\nexport default function PlanPage() {\r\n  return (\r\n    <Suspense fallback={<div>読み込み中...</div>}>\r\n      <ClientPlan />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,qBACE,8OAAC,qMAAA,CAAA,WAAQ;QAAC,wBAAU,8OAAC;sBAAI;;;;;;kBACvB,cAAA,8OAAC,0HAAA,CAAA,UAAU;;;;;;;;;;AAGjB","debugId":null}}]
}